{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2022/gatsby-site-create-log2/","result":{"data":{"markdownRemark":{"id":"7b99baac-caa7-59d9-b89f-529557e62f98","excerpt":"ここのやり方は悪いやり方です。 より良い方法は8.tag 個別ページ作成の前半で行ってます。 このサイトを作るまでの記録。(時系列順) 実際に作業を行なったメモに追記、編集して投稿してるので投稿日と作業日は一致しない。 スターターをgatsby newしたのは 2022 年の 3 月上旬。\ngatsby…","html":"<p><span style=\"font-size: 200%; color: red;\">ここのやり方は悪いやり方です。</span></p>\n<p><span style=\"font-size: 200%; color: red;\">より良い方法は<a href=\"../gatsby-site-create-log8/\">8.tag 個別ページ作成</a>の前半で行ってます。</span></p>\n<blockquote>\n<p>このサイトを作るまでの記録。(時系列順)<br>\n実際に作業を行なったメモに追記、編集して投稿してるので投稿日と作業日は一致しない。</p>\n<p>スターターを<code>gatsby new</code>したのは 2022 年の 3 月上旬。\n<code>gatsby</code>のバージョンは 4.9</p>\n<p><a href=\"../gatsby-site-create-log0/\">一覧はここ</a></p>\n</blockquote>\n<h2 id=\"ブログ記事をblog下の-url-に変更\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E8%A8%98%E4%BA%8B%E3%82%92blog%E4%B8%8B%E3%81%AE-url-%E3%81%AB%E5%A4%89%E6%9B%B4\" aria-label=\"ブログ記事をblog下の url に変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログ記事を<code>/blog</code>下の URL に変更</h2>\n<p><code>gatsby-node.js</code>を編集</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">exports</span><span class=\"mtk1\">.</span><span class=\"mtk11\">createPages</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> ({ </span><span class=\"mtk12\">graphql</span><span class=\"mtk1\">, </span><span class=\"mtk12\">actions</span><span class=\"mtk1\">, </span><span class=\"mtk12\">reporter</span><span class=\"mtk1\"> }) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">posts</span><span class=\"mtk1\">.</span><span class=\"mtk11\">forEach</span><span class=\"mtk1\">((</span><span class=\"mtk12\">post</span><span class=\"mtk1\">, </span><span class=\"mtk12\">index</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">previousPostId</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">index</span><span class=\"mtk1\"> === </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> ? </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> : </span><span class=\"mtk12\">posts</span><span class=\"mtk1\">[</span><span class=\"mtk12\">index</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">].</span><span class=\"mtk12\">id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">nextPostId</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">index</span><span class=\"mtk1\"> === </span><span class=\"mtk12\">posts</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> ? </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> : </span><span class=\"mtk12\">posts</span><span class=\"mtk1\">[</span><span class=\"mtk12\">index</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">].</span><span class=\"mtk12\">id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">createPage</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">path:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`/blog</span><span class=\"mtk4\">${</span><span class=\"mtk12\">post</span><span class=\"mtk1\">.</span><span class=\"mtk12\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk12\">slug</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">component:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">blogPost</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">context:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">post</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">previousPostId</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">nextPostId</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>これでブログ記事は/blog 下になったんだけど、index.js からのリンクが変わってないから index のページからリンクで飛べない。<br>\n<code>pages/index.js</code>を編集してリンクも /blog/... に変える</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">BlogIndex</span><span class=\"mtk1\"> = ({ </span><span class=\"mtk12\">data</span><span class=\"mtk1\">, </span><span class=\"mtk12\">location</span><span class=\"mtk1\"> }) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">header</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">h2</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    // ↓ここ</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk12\">to</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk8\">`/blog</span><span class=\"mtk4\">${</span><span class=\"mtk12\">post</span><span class=\"mtk1\">.</span><span class=\"mtk12\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk12\">slug</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk12\">itemProp</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;url&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">span</span><span class=\"mtk1\"> </span><span class=\"mtk12\">itemProp</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;headline&quot;</span><span class=\"mtk17\">&gt;</span><span class=\"mtk4\">{</span><span class=\"mtk12\">title</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">span</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Link</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">h2</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">small</span><span class=\"mtk17\">&gt;</span><span class=\"mtk4\">{</span><span class=\"mtk12\">post</span><span class=\"mtk1\">.</span><span class=\"mtk12\">frontmatter</span><span class=\"mtk1\">.</span><span class=\"mtk12\">date</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">small</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">header</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<p>個別ページにおいても前後の記事に移動できないので<code>templates/blog-post.js</code>を編集</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">{</span><span class=\"mtk12\">previous</span><span class=\"mtk1\"> &amp;&amp; (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">             </span><span class=\"mtk3\">// ↓ここ</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk12\">to</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk8\">`/blog</span><span class=\"mtk4\">${</span><span class=\"mtk12\">previous</span><span class=\"mtk1\">.</span><span class=\"mtk12\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk12\">slug</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rel</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;prev&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                ← </span><span class=\"mtk4\">{</span><span class=\"mtk12\">previous</span><span class=\"mtk1\">.</span><span class=\"mtk12\">frontmatter</span><span class=\"mtk1\">.</span><span class=\"mtk12\">title</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Link</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            )</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">{</span><span class=\"mtk12\">next</span><span class=\"mtk1\"> &amp;&amp; (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk3\">// ↓ここ</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk12\">to</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk8\">`/blog</span><span class=\"mtk4\">${</span><span class=\"mtk12\">next</span><span class=\"mtk1\">.</span><span class=\"mtk12\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk12\">slug</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rel</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;next&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk4\">{</span><span class=\"mtk12\">next</span><span class=\"mtk1\">.</span><span class=\"mtk12\">frontmatter</span><span class=\"mtk1\">.</span><span class=\"mtk12\">title</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> →</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Link</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            )</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">li</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<h2 id=\"contentpostyyyyにブログ記事データを置きたい\" style=\"position:relative;\"><a href=\"#contentpostyyyy%E3%81%AB%E3%83%96%E3%83%AD%E3%82%B0%E8%A8%98%E4%BA%8B%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E7%BD%AE%E3%81%8D%E3%81%9F%E3%81%84\" aria-label=\"contentpostyyyyにブログ記事データを置きたい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>content/post/YYYY</code>にブログ記事データを置きたい</h2>\n<p><code>content/blog</code>を<code>content/post</code>に変更<br>\n初期で入ってるサンプルデータは 2015 だったので<code>content/post/2015</code>に入れとく<br>\nついでに<code>content/post/2021</code>も作っておく</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 468px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0046bdfe84944ce35453a7a49ea935b4/90372/screenshot_dir.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACmklEQVQ4y3WRTW8bVRSGZ5HGHX/c+bxz59sf444dt5PWcWInJHUCrZK4aepQsihISEisKrWbbkACiSQVGxb8ACQ27BA/8kEeS25pxOLVea9073Pec65mWybC9XEGu9i+QvgOZqIwYg9DOTiRwk0DnFghGgLDMFYSQmBYJrZySx+EIVrguYiwQ+ebn0iK+4RbXaKtHs2DAr/fIt7pkz4uUP0mot64BTRtC3fRTAjCBdDzPGzTZHsyoZV1cbsRQZHhJD6Nar282KjVV7Ay1acJfflRwiDAcRx2vzimnfeQeULwoIPsRNTX9RLWqNZWoE+BpmXihN4HoCslrmNTjHaYnpxhxZJomKN6KarXxL/fLse2A2+5Q/P2yIs9r0aWUmJbFvngAcPJZ1iRJHzYRWYxXhaXUNVvlQ/rlepqDf/7KVJ6SMdhtD/l87MLrFQtIXlKOLyHP2iVDRZJo+0e0ahXwheA1ack/kcJPYVl27TzPoPhNmbg4XVT3HaM12vhtiJklizPebOshmUhDLPUwlueLH2Z0LMFnlljd3+f2fwCKxCkOxkqUyTDFs1xRvKoRbyZko46+JlCrK9h1ioY+jqW0PFCC0O/Qxj4aEZxRHUwRe3NiY9eYYye4h69wByfYOzNsJ9elFWMT7CfzBGTU+7mB+gbU/T+FH0wpVocoW8cEqQdtNrlDWsvf+Xwxz9pfv874x/+4vjqbzbe/oE2+wXt2RXa2TXa85ulf36NNn+P9uL9h3p+jfbyN1Q+RGs8PKY2PEUdzjBGM8TWM5zxOfVHp1SKE+5uLrU2eEKlOC79ot7S5gy/2UWThkN/5HLzzyWHjye8ujznzevvONgb8dX8lG+//rLU1c/vuNdOqFXuYDaqGHX9v6rp5Q7/BcZfagVAXQZeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ディレクトリ構成\"\n        title=\"ディレクトリ構成\"\n        src=\"/static/0046bdfe84944ce35453a7a49ea935b4/90372/screenshot_dir.png\"\n        srcset=\"/static/0046bdfe84944ce35453a7a49ea935b4/c26ae/screenshot_dir.png 158w,\n/static/0046bdfe84944ce35453a7a49ea935b4/6bdcf/screenshot_dir.png 315w,\n/static/0046bdfe84944ce35453a7a49ea935b4/90372/screenshot_dir.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>こうすると URL も /blog/YYYY 下になる。</p>\n<p>ブログのファイルのパスが変わったので<code>gatsby-config.js</code>も変更しておく</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"jsx\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">plugins: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">resolve:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">options:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">path:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">__dirname</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/content/post`</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// &lt;- 変更</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`blog`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span></code></pre>\n<p>YYYY を消したければ index.js と gatsby-node.js をいじればいいいのかな?わからん。</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"2.サイトのディレクトリ変更 (Gatsby-jsによるサイト構築記録)","postdate":"2022/03/09 (17:21)","update":"2022/03/10 (10:01)","tags":["Gatsby"]}},"previous":{"fields":{"slug":"/blog/2022/gatsby-site-create-log1/"},"frontmatter":{"title":"1.セットアップ (Gatsby-jsによるサイト構築記録)"}},"next":{"fields":{"slug":"/blog/2022/gatsby-site-create-log3/"},"frontmatter":{"title":"3.整理 (Gatsby-jsによるサイト構築記録)"}}},"pageContext":{"id":"7b99baac-caa7-59d9-b89f-529557e62f98","previousPostId":"81b402eb-6c26-57fd-840a-8e0fd4ed5349","nextPostId":"3fbed4a4-5363-5660-aa55-1b5727a730db"}},"staticQueryHashes":["1334514254","1725242874"]}